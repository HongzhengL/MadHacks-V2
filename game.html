<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>The Badger Budget: Planning Edition</title>
        <link rel="stylesheet" href="game.css" />
    </head>
    <body>
        <div id="setup-modal" class="modal-overlay">
            <div class="modal-box" id="setup-step-1">
                <h2>Welcome to Madison! ðŸ¦¡</h2>
                <p>Select your income level:</p>
                <div class="selection-grid" id="diff-options"></div>
            </div>
            <div class="modal-box hidden" id="setup-step-2">
                <h2>Choose Housing</h2>
                <p>Rent is paid every 2 weeks.</p>
                <div class="selection-grid" id="housing-options"></div>
            </div>
        </div>

        <header>
            <div style="display: flex; gap: 10px; align-items: center">
                <h3 style="margin: 0; color: var(--primary-red)">
                    Badger Budget
                </h3>
                <div class="stat-badge bg-light">
                    Week <span id="ui-round">1</span>
                </div>
                <div class="stat-badge bg-light" id="streak-badge">
                    ðŸ”¥ Streak: <span id="ui-streak" style="margin-left: 5px; font-weight: bold;">0</span>
                </div>
            </div>
            <div style="display: flex; gap: 10px; align-items: center">
                <div class="stat-badge badge-liquidity">
                    <div class="badge-label">Liquidity</div>
                    <div class="badge-value" id="ui-liquidity">$0</div>
                    <div class="badge-subtext" id="ui-liquidity-breakdown">
                        Cash <span id="ui-cash">$0</span> Â· Emerg <span id="ui-emergency">$0</span> Â· HYSA <span id="ui-hysa">$0</span> Â· Vacation <span id="ui-vacation">$0</span>
                    </div>
                </div>
                <div class="stat-badge badge-nest">
                    <div class="badge-label">Nest Egg</div>
                    <div class="badge-value" id="ui-nest-egg">$0</div>
                    <div class="badge-subtext">Retirement (locked)</div>
                </div>
                <div class="stat-badge bg-light" id="debt-badge">
                    Debt:
                    <span id="ui-debt" style="margin-left: 5px">$0</span>
                    <span
                        id="ui-debt-count"
                        style="margin-left: 5px; font-size: 0.8rem; color: #666"
                        >(0)</span
                    >
                </div>
                <div class="stat-badge bg-light qol-badge">
                    <span style="font-weight: 600; color: #1565c0">QoL</span>
                    <div class="qol-bar">
                        <div
                            id="ui-qol-bar"
                            class="qol-bar-fill"
                            style="width: 50%"></div>
                    </div>
                    <span id="ui-qol-text" class="qol-text">50</span>
                </div>
                <button class="btn-ghost" onclick="openRecap()">
                    View Recap
                </button>
                <button class="btn-primary" onclick="nextRound()">
                    Finish Round
                </button>
            </div>
        </header>

        <div
            id="recap-modal"
            class="recap-overlay"
            onclick="if(event.target === this) closeRecap()">
            <div class="recap-panel">
                <div class="recap-header">
                    <div>
                        <div class="recap-eyebrow">Because you...</div>
                        <div class="recap-title">
                            Last round's ripple effects
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center">
                        <div class="recap-round">
                            Round <span id="recap-round">-</span>
                        </div>
                        <button class="btn-ghost" onclick="closeRecap()">
                            Close
                        </button>
                    </div>
                </div>
                <ul class="recap-list" id="recap-list">
                    <li class="recap-empty">
                        Finish a round to see the cause-and-effect story.
                    </li>
                </ul>
            </div>
        </div>

        <div
            id="withdraw-modal"
            class="modal-overlay hidden"
            onclick="if(event.target === this) closeWithdrawModal()">
            <div class="modal-box">
                <h3 id="withdraw-title" style="margin-top: 0">Withdraw</h3>
                <p id="withdraw-desc"></p>
                <input
                    id="withdraw-amount"
                    type="number"
                    min="0"
                    step="1"
                    value="0" />
                <div
                    style="
                        display: flex;
                        gap: 10px;
                        justify-content: flex-end;
                        margin-top: 14px;
                    ">
                    <button class="btn-ghost" onclick="closeWithdrawModal()">
                        Cancel
                    </button>
                    <button class="btn-primary" onclick="confirmWithdraw()">
                        Confirm
                    </button>
                </div>
            </div>
        </div>

        <div id="endgame-overlay" class="modal-overlay hidden">
            <div class="modal-box endgame-box">
                <h2 style="margin-top: 0">Year Complete</h2>
                <p id="endgame-reason">You made it through the year. Let's see how you did.</p>
                <div class="endgame-grid">
                    <div class="endgame-tile stretch">
                        <div class="endgame-label">Net Worth</div>
                        <div class="endgame-value" id="endgame-networth">$0</div>
                    </div>
                    <div class="endgame-tile">
                        <div class="endgame-label">Liquidity</div>
                        <div class="endgame-value" id="endgame-liquidity">$0</div>
                        <div class="endgame-sub" id="endgame-breakdown"></div>
                    </div>
                    <div class="endgame-tile">
                        <div class="endgame-label">Nest Egg</div>
                        <div class="endgame-value" id="endgame-nest">$0</div>
                        <div class="endgame-sub">Locked retirement balance</div>
                    </div>
                    <div class="endgame-tile">
                        <div class="endgame-label">Debt</div>
                        <div class="endgame-value danger" id="endgame-debt">$0</div>
                        <div class="endgame-sub">Subtract this from your total</div>
                    </div>
                </div>
                <div class="endgame-future" id="endgame-future"></div>
                <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 14px">
                    <button class="btn-primary" onclick="location.reload()">Play Again</button>
                </div>
            </div>
        </div>

        <div id="card-menu" class="context-menu"></div>

        <div class="wallet-row">
            <span style="font-weight: bold; font-size: 0.9rem; color: #555"
                >Drag to Pay:</span
            >
            <div
                class="bill bill-100"
                draggable="true"
                ondragstart="drag(event)"
                data-val="100"
                data-type="cash">
                $100
            </div>
            <div
                class="bill bill-50"
                draggable="true"
                ondragstart="drag(event)"
                data-val="50"
                data-type="cash">
                $50
            </div>
            <div
                class="bill bill-10"
                draggable="true"
                ondragstart="drag(event)"
                data-val="10"
                data-type="cash">
                $10
            </div>
            <div
                class="bill bill-1"
                draggable="true"
                ondragstart="drag(event)"
                data-val="1"
                data-type="cash">
                $1
            </div>
            <div style="width: 1px; height: 20px; background: #ddd"></div>
            <div
                class="bill card-credit"
                draggable="true"
                ondragstart="drag(event)"
                data-val="ALL"
                data-type="credit">
                ðŸ’³ Credit
            </div>
            <span style="font-size: 0.8rem; color: #888; margin-left: auto"
                >Tip: Click small bills on cards to undo.</span
            >
        </div>

        <div class="board">
            <div class="column col-fixed">
                <div class="col-header">
                    FIXED <span id="count-fixed">(0)</span>
                </div>
                <div class="col-content" id="col-fixed-content"></div>
            </div>
            <div class="column col-var">
                <div class="col-header">
                    VARIABLE <span id="count-var">(0)</span>
                </div>
                <div class="col-content" id="col-var-content"></div>
            </div>
            <div class="column col-goal">
                <div class="col-header">
                    GOAL <span id="count-goal">(0)</span>
                </div>
                <div class="col-content" id="col-goal-content"></div>
            </div>
            <div class="column col-event">
                <div class="col-header">
                    EVENT <span id="count-event">(0)</span>
                </div>
                <div class="col-content" id="col-event-content"></div>
            </div>
            <div class="column col-opp">
                <div class="col-header">
                    OPPORTUNITY <span id="count-opp">(0)</span>
                </div>
                <div class="col-content" id="col-opp-content"></div>
            </div>
        </div>

        <div id="toast" class="toast">Msg</div>

        <script src="game.js"></script>
    </body>
</html>
